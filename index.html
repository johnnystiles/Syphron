<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SYPHRON - DeFi AI Autonomous Agent</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Add Web3 library -->
    <script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js" type="application/javascript"></script>
    <!-- Google Fonts for Techno Look -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&family=Rajdhani:wght@300;400;500;600&family=Share+Tech+Mono&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <nav>
            <div class="logo">
                <span class="glitch-effect" data-text="SYPHRON">SYPHRON</span>
            </div>
            <div class="nav-links">
                <a href="#" class="nav-link" data-tab="home">Home</a>
                <a href="#" class="nav-link" data-tab="mint">Mint SYPH</a>
                <a href="#" class="nav-link" data-tab="whitepaper">Whitepaper</a>
                <a href="#" class="nav-link" data-tab="about">About</a>
                <a href="https://app.syphron.com" class="app-link">Launch App</a>
            </div>
        </nav>
    </header>
    
    <div class="circuit-lines">
        <div class="circuit-line"></div>
        <div class="circuit-line"></div>
        <div class="circuit-line"></div>
    </div>
    
    <div class="digital-rain" id="digitalRain"></div>
    
    <div class="tab-content active-tab" id="home">
        <section class="hero">
            <h1>SYPHRON</h1>
            <p>The next generation DeFi AI autonomous agent. Leveraging cutting-edge technology to maximize your yield through intelligent, adaptive strategies.</p>
            <div>
                <button class="btn" id="mintBtn">Mint SYPH Tokens</button>
                <button class="btn" id="whitepaperBtn">Read Whitepaper</button>
            </div>
            <a href="https://app.syphron.com" class="launch-app-btn">Launch App</a>
        </section>
    </div>
    
    <div class="tab-content" id="mint">
        <h2 class="section-title">Mint SYPH Tokens</h2>
        <div class="mint-container">
            <div class="token-info">
                <div class="token-card">
                    <div class="token-header">
                        <div class="token-symbol">SYPH</div>
                        <div class="token-name">Syphron Token</div>
                    </div>
                    <div class="token-details">
                        <div class="token-address">
                            <span class="label">Contract:</span>
                            <span class="value">0x7c39859394D27B5A0bF1a4c10035EC1e323f47e5</span>
                        </div>
                        <div class="token-exchange">
                            <span class="label">Exchange Rate:</span>
                            <span class="value">1 USDC = 1 SYPH</span>
                        </div>
                        <div class="token-description">
                            SYPH is the governance and utility token of the Syphron ecosystem. Token holders can participate in governance decisions, receive a share of protocol revenues, and access premium features.
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="mint-form">
                <div class="form-group">
                    <label for="wallet">Connect Wallet</label>
                    <button id="wallet" class="btn" style="width: 100%">Connect Wallet</button>
                </div>
                <div class="form-group">
                    <label for="mint-amount">Amount to Mint</label>
                    <input type="text" id="mint-amount" placeholder="0.0">
                </div>
                <div class="form-group">
                    <div class="exchange-info">
                        <span>You will spend:</span>
                        <span id="usdc-amount">0 USDC</span>
                    </div>
                    <div class="exchange-info">
                        <span>You will receive:</span>
                        <span id="syph-amount">0 SYPH</span>
                    </div>
                </div>
                <button id="mint-btn" class="btn" style="width: 100%" disabled>Mint SYPH Tokens</button>
                <div class="token-vault">
                    <span class="label">USDC Vault Address:</span>
                    <span class="value">0xd8887a899cd3140dA1E7E00Ae0d01df770cb9E53</span>
                </div>
            </div>
        </div>
    </div>
    
    <div class="tab-content" id="whitepaper">
        <h2 class="section-title">Whitepaper</h2>
        <div class="whitepaper">
            <div class="whitepaper-content">
                <h3>1. Abstract</h3>
                <p>Syphron represents a paradigm shift in decentralized finance by introducing an autonomous AI agent capable of analyzing market conditions, predicting yield opportunities, and automatically deploying capital to maximize returns while maintaining optimal risk parameters.</p>
                
                <h3>2. Introduction</h3>
                <p>The DeFi landscape presents unprecedented opportunities for capital deployment across various protocols and strategies. However, the complexity, volatility, and rapid evolution of these systems make it challenging for individual investors to optimize their positions. Syphron addresses this problem through an AI-driven autonomous agent that continuously monitors the DeFi ecosystem to identify optimal yield strategies.</p>
                
                <h3>3. Technology</h3>
                <p>Syphron utilizes a multi-layered neural network architecture with specialized modules for:</p>
                <ul>
                    <li>Real-time data aggregation from on-chain and off-chain sources</li>
                    <li>Predictive analysis of market trends and yield fluctuations</li>
                    <li>Risk assessment through advanced stochastic modeling</li>
                    <li>Automated strategy execution via smart contract integration</li>
                    <li>Self-improvement through reinforcement learning mechanisms</li>
                </ul>
                
                <h3>4. Tokenomics</h3>
                <p>The SYPH token serves as the governance and utility token of the Syphron ecosystem. Token holders can participate in governance decisions, receive a share of protocol revenues, and access premium features such as customized risk profiles and strategy optimization.</p>
                <p>SYPH tokens can be minted at a 1:1 ratio with USDC. This mechanism ensures stability and transparency in the token's value proposition. The total supply of SYPH is capped at 100 million tokens.</p>
                
                <h3>5. Security Measures</h3>
                <p>Syphron implements multiple security layers including formal verification of smart contracts, multi-signature transaction approval, circuit breakers for anomalous market conditions, and regular security audits by leading firms in the industry.</p>
                
                <h3>6. Roadmap</h3>
                <p>The development and deployment of Syphron will proceed through several phases:</p>
                <ul>
                    <li>Phase 1: Beta release with limited asset support and basic strategies</li>
                    <li>Phase 2: Expansion to multiple chains and DeFi protocols</li>
                    <li>Phase 3: Advanced strategy development including leveraged positions</li>
                    <li>Phase 4: Introduction of cross-chain liquidity optimization</li>
                    <li>Phase 5: Full decentralization of governance and operations</li>
                </ul>
                
                <h3>7. Conclusion</h3>
                <p>Syphron represents a significant advancement in the automation and optimization of DeFi strategies through artificial intelligence. By removing human bias and emotional decision-making from the investment process, Syphron aims to deliver superior risk-adjusted returns for its users while contributing to the overall efficiency of decentralized markets.</p>
            </div>
        </div>
    </div>
    
    <div class="tab-content" id="about">
        <h2 class="section-title">About Syphron</h2>
        <p>Syphron is revolutionizing DeFi by combining cutting-edge AI with blockchain technology to create an autonomous agent that optimizes yield strategies in real-time.</p>
        
        <div class="about-grid">
            <div class="about-card">
                <div class="icon">ü§ñ</div>
                <h3>AI-Powered</h3>
                <p>Utilizing advanced machine learning algorithms to analyze market conditions and predict optimal yield opportunities across the DeFi ecosystem.</p>
            </div>
            
            <div class="about-card">
                <div class="icon">üîí</div>
                <h3>Secure</h3>
                <p>Multiple layers of security including smart contract audits, formal verification, and multi-signature approvals to ensure your assets remain safe.</p>
            </div>
            
            <div class="about-card">
                <div class="icon">üìà</div>
                <h3>Adaptive</h3>
                <p>Continuously evolving strategies that adjust to changing market conditions and new opportunities in the rapidly evolving DeFi landscape.</p>
            </div>
            
            <div class="about-card">
                <div class="icon">‚ö°</div>
                <h3>Efficient</h3>
                <p>Optimizing gas costs, minimizing slippage, and maximizing capital efficiency to deliver superior risk-adjusted returns.</p>
            </div>
        </div>
    </div>
    
    <footer>
        <div class="footer-content">
            <div class="footer-links">
                <a href="#">Terms</a>
                <a href="#">Privacy</a>
                <a href="#">Docs</a>
                <a href="#">FAQ</a>
                <a href="#">Contact</a>
            </div>
            <div class="social-links">
                <a href="#">üê¶</a>
                <a href="#">üì±</a>
                <a href="#">üåê</a>
                <a href="#">üìù</a>
            </div>
            <div class="copyright">
                &copy; 2025 Syphron. All rights reserved.
            </div>
        </div>
    </footer><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SYPHRON - DeFi AI Autonomous Agent</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <nav>
            <div class="logo">
                <span class="glitch-effect" data-text="SYPHRON">SYPHRON</span>
            </div>
            <div class="nav-links">
                <a href="#" class="nav-link" data-tab="home">Home</a>
                <a href="#" class="nav-link" data-tab="whitepaper">Whitepaper</a>
                <a href="#" class="nav-link" data-tab="deposit">Deposit</a>
                <a href="#" class="nav-link" data-tab="about">About</a>
            </div>
        </nav>
    </header>
    
    <div class="circuit-lines">
        <div class="circuit-line"></div>
        <div class="circuit-line"></div>
        <div class="circuit-line"></div>
    </div>
    
    <div class="digital-rain" id="digitalRain"></div>
    
    <div class="tab-content active-tab" id="home">
        <section class="hero">
            <h1>SYPHRON</h1>
            <p>The next generation DeFi AI autonomous agent. Leveraging cutting-edge technology to maximize your yield through intelligent, adaptive strategies.</p>
            <div>
                <button class="btn" onclick="changeTab('deposit')">Start Investing</button>
                <button class="btn" onclick="changeTab('whitepaper')">Read Whitepaper</button>
            </div>
        </section>
    </div>
    
    <div class="tab-content" id="whitepaper">
        <h2 class="section-title">Whitepaper</h2>
        <div class="whitepaper">
            <div class="whitepaper-content">
                <h3>1. Abstract</h3>
                <p>Syphron represents a paradigm shift in decentralized finance by introducing an autonomous AI agent capable of analyzing market conditions, predicting yield opportunities, and automatically deploying capital to maximize returns while maintaining optimal risk parameters.</p>
                
                <h3>2. Introduction</h3>
                <p>The DeFi landscape presents unprecedented opportunities for capital deployment across various protocols and strategies. However, the complexity, volatility, and rapid evolution of these systems make it challenging for individual investors to optimize their positions. Syphron addresses this problem through an AI-driven autonomous agent that continuously monitors the DeFi ecosystem to identify optimal yield strategies.</p>
                
                <h3>3. Technology</h3>
                <p>Syphron utilizes a multi-layered neural network architecture with specialized modules for:</p>
                <ul>
                    <li>Real-time data aggregation from on-chain and off-chain sources</li>
                    <li>Predictive analysis of market trends and yield fluctuations</li>
                    <li>Risk assessment through advanced stochastic modeling</li>
                    <li>Automated strategy execution via smart contract integration</li>
                    <li>Self-improvement through reinforcement learning mechanisms</li>
                </ul>
                
                <h3>4. Tokenomics</h3>
                <p>The SYPH token serves as the governance and utility token of the Syphron ecosystem. Token holders can participate in governance decisions, receive a share of protocol revenues, and access premium features such as customized risk profiles and strategy optimization.</p>
                
                <h3>5. Security Measures</h3>
                <p>Syphron implements multiple security layers including formal verification of smart contracts, multi-signature transaction approval, circuit breakers for anomalous market conditions, and regular security audits by leading firms in the industry.</p>
                
                <h3>6. Roadmap</h3>
                <p>The development and deployment of Syphron will proceed through several phases:</p>
                <ul>
                    <li>Phase 1: Beta release with limited asset support and basic strategies</li>
                    <li>Phase 2: Expansion to multiple chains and DeFi protocols</li>
                    <li>Phase 3: Advanced strategy development including leveraged positions</li>
                    <li>Phase 4: Introduction of cross-chain liquidity optimization</li>
                    <li>Phase 5: Full decentralization of governance and operations</li>
                </ul>
                
                <h3>7. Conclusion</h3>
                <p>Syphron represents a significant advancement in the automation and optimization of DeFi strategies through artificial intelligence. By removing human bias and emotional decision-making from the investment process, Syphron aims to deliver superior risk-adjusted returns for its users while contributing to the overall efficiency of decentralized markets.</p>
            </div>
        </div>
    </div>
    
    <div class="tab-content" id="deposit">
        <h2 class="section-title">Deposit</h2>
        <div class="deposit-form">
            <div class="form-group">
                <label for="wallet">Connect Wallet</label>
                <button id="wallet" class="btn" style="width: 100%">Connect Wallet</button>
            </div>
            <div class="form-group">
                <label for="amount">Amount</label>
                <input type="text" id="amount" placeholder="0.0">
            </div>
            <div class="form-group">
                <label for="asset">Asset</label>
                <input type="text" id="asset" placeholder="ETH">
            </div>
            <div class="form-group">
                <label for="strategy">Strategy</label>
                <input type="text" id="strategy" placeholder="Balanced">
            </div>
            <button class="btn" style="width: 100%">Deposit</button>
        </div>
    </div>
    
    <div class="tab-content" id="about">
        <h2 class="section-title">About Syphron</h2>
        <p>Syphron is revolutionizing DeFi by combining cutting-edge AI with blockchain technology to create an autonomous agent that optimizes yield strategies in real-time.</p>
        
        <div class="about-grid">
            <div class="about-card">
                <div class="icon">ü§ñ</div>
                <h3>AI-Powered</h3>
                <p>Utilizing advanced machine learning algorithms to analyze market conditions and predict optimal yield opportunities across the DeFi ecosystem.</p>
            </div>
            
            <div class="about-card">
                <div class="icon">üîí</div>
                <h3>Secure</h3>
                <p>Multiple layers of security including smart contract audits, formal verification, and multi-signature approvals to ensure your assets remain safe.</p>
            </div>
            
            <div class="about-card">
                <div class="icon">üìà</div>
                <h3>Adaptive</h3>
                <p>Continuously evolving strategies that adjust to changing market conditions and new opportunities in the rapidly evolving DeFi landscape.</p>
            </div>
            
            <div class="about-card">
                <div class="icon">‚ö°</div>
                <h3>Efficient</h3>
                <p>Optimizing gas costs, minimizing slippage, and maximizing capital efficiency to deliver superior risk-adjusted returns.</p>
            </div>
        </div>
    </div>
    
    <footer>
        <div class="footer-content">
            <div class="footer-links">
                <a href="#">Terms</a>
                <a href="#">Privacy</a>
                <a href="#">Docs</a>
                <a href="#">FAQ</a>
                <a href="#">Contact</a>
            </div>
            <div class="social-links">
                <a href="#">üê¶</a>
                <a href="#">üì±</a>
                <a href="#">üåê</a>
                <a href="#">üìù</a>
            </div>
            <div class="copyright">
                &copy; 2025 Syphron. All rights reserved.
            </div>
        </div>
    </footer>
    
    <script src="web3-utils.js"></script>
    <script>
    // Contract addresses and ABIs
    const SYPH_CONTRACT_ADDRESS = '0x7c39859394D27B5A0bF1a4c10035EC1e323f47e5';
    const USDC_CONTRACT_ADDRESS = '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48'; // Ethereum Mainnet USDC
    const VAULT_ADDRESS = '0xd8887a899cd3140dA1E7E00Ae0d01df770cb9E53';
    
    // ERC20 ABI (Minimal for our needs)
    const ERC20_ABI = [
        // Read-only functions
        "function balanceOf(address owner) view returns (uint256)",
        "function decimals() view returns (uint8)",
        "function symbol() view returns (string)",
        
        // Write functions
        "function approve(address spender, uint256 amount) returns (bool)",
        "function transfer(address to, uint256 amount) returns (bool)",
        
        // Events
        "event Transfer(address indexed from, address indexed to, uint256 amount)",
        "event Approval(address indexed owner, address indexed spender, uint256 amount)"
    ];
    
    // SyphToken ABI
    const SYPH_ABI = [
        ...ERC20_ABI,
        "function mintWithUSDC(uint256 usdcAmount) external",
        "function calculateMintAmount(uint256 usdcAmount) view returns (uint256)"
    ];
    
    // Global variables
    let provider, signer, syphContract, usdcContract;
    let currentAccount = null;
    
    // Website navigation and initialization
    document.addEventListener('DOMContentLoaded', function() {
        // Tab navigation
        const navLinks = document.querySelectorAll('.nav-link');
        navLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const tabId = this.getAttribute('data-tab');
                changeTab(tabId);
            });
        });
        
        // Button navigation
        const mintBtn = document.getElementById('mintBtn');
        if (mintBtn) {
            mintBtn.addEventListener('click', function() {
                changeTab('mint');
            });
        }
        
        const whitepaperBtn = document.getElementById('whitepaperBtn');
        if (whitepaperBtn) {
            whitepaperBtn.addEventListener('click', function() {
                changeTab('whitepaper');
            });
        }
        
        const aboutBtn = document.getElementById('aboutBtn');
        if (aboutBtn) {
            aboutBtn.addEventListener('click', function() {
                changeTab('about');
            });
        }
        
        // Connect wallet button
        const walletBtn = document.getElementById('wallet');
        if (walletBtn) {
            walletBtn.addEventListener('click', connectWallet);
        }
        
        // Mint button
        const mintTokenBtn = document.getElementById('mint-btn');
        if (mintTokenBtn) {
            mintTokenBtn.addEventListener('click', mintTokens);
        }
        
        // Amount input listener for real-time conversion
        const amountInput = document.getElementById('mint-amount');
        if (amountInput) {
            // Make the input container relative for the MAX button
            amountInput.parentElement.classList.add('input-with-max');
            
            // Add MAX button
            const maxButton = document.createElement('button');
            maxButton.type = 'button';
            maxButton.className = 'max-button';
            maxButton.innerText = 'MAX';
            maxButton.addEventListener('click', setMaxAmount);
            amountInput.parentElement.appendChild(maxButton);
            
            // Listen for input changes
            amountInput.addEventListener('input', updateConversionAmount);
        }
        
        // Create digital rain effect
        createDigitalRain();
        
        // Check if wallet is already connected
        checkWalletConnection();
    });
    
    // Change tab function
    function changeTab(tabId) {
        const tabs = document.querySelectorAll('.tab-content');
        tabs.forEach(tab => {
            tab.classList.remove('active-tab');
        });
        
        document.getElementById(tabId).classList.add('active-tab');
        
        // Update active link
        const links = document.querySelectorAll('.nav-link');
        links.forEach(link => {
            if (link.getAttribute('data-tab') === tabId) {
                link.classList.add('active');
            } else {
                link.classList.remove('active');
            }
        });
        
        // If changing to mint tab and wallet is connected, update balances
        if (tabId === 'mint' && currentAccount) {
            updateTokenBalances();
        }
    }
    
    // Connect wallet
    async function connectWallet() {
        // Check if MetaMask is available
        if (typeof window.ethereum === 'undefined') {
            showNotification('Please install MetaMask to connect your wallet', 'error');
            return;
        }
        
        try {
            // Update button state
            const walletBtn = document.getElementById('wallet');
            walletBtn.innerHTML = 'Connecting...';
            
            // Connect to provider
            provider = new ethers.providers.Web3Provider(window.ethereum);
            
            // Request account access
            const accounts = await provider.send("eth_requestAccounts", []);
            signer = provider.getSigner();
            currentAccount = accounts[0];
            
            // Initialize contracts
            syphContract = new ethers.Contract(SYPH_CONTRACT_ADDRESS, SYPH_ABI, signer);
            usdcContract = new ethers.Contract(USDC_CONTRACT_ADDRESS, ERC20_ABI, signer);
            
            // Update UI
            updateWalletUI();
            
            // Setup event listeners for wallet changes
            window.ethereum.on('accountsChanged', handleAccountsChanged);
            window.ethereum.on('chainChanged', handleChainChanged);
            
            return currentAccount;
        } catch (error) {
            console.error('Error connecting wallet:', error);
            const walletBtn = document.getElementById('wallet');
            walletBtn.innerHTML = 'Connect Wallet';
            showNotification('Failed to connect wallet: ' + error.message, 'error');
        }
    }
    
    // Check if wallet is connected on page load
    async function checkWalletConnection() {
        if (typeof window.ethereum !== 'undefined') {
            try {
                provider = new ethers.providers.Web3Provider(window.ethereum);
                const accounts = await provider.listAccounts();
                
                if (accounts.length > 0) {
                    signer = provider.getSigner();
                    currentAccount = accounts[0];
                    
                    // Initialize contracts
                    syphContract = new ethers.Contract(SYPH_CONTRACT_ADDRESS, SYPH_ABI, signer);
                    usdcContract = new ethers.Contract(USDC_CONTRACT_ADDRESS, ERC20_ABI, signer);
                    
                    // Update UI
                    updateWalletUI();
                    
                    // Setup event listeners for wallet changes
                    window.ethereum.on('accountsChanged', handleAccountsChanged);
                    window.ethereum.on('chainChanged', handleChainChanged);
                }
            } catch (error) {
                console.error('Error checking wallet connection:', error);
            }
        }
    }
    
    // Update wallet UI
    async function updateWalletUI() {
        if (!currentAccount) return;
        
        // Update connect button
        const walletBtn = document.getElementById('wallet');
        if (walletBtn) {
            walletBtn.innerHTML = 'Wallet Connected';
            walletBtn.classList.add('connected');
        }
        
        // Get network info
        const network = await provider.getNetwork();
        const networkName = getNetworkName(network.chainId);
        
        // Show wallet info
        showWalletInfo(currentAccount, networkName);
        
        // Enable mint button
        const mintBtn = document.getElementById('mint-btn');
        if (mintBtn) {
            mintBtn.disabled = false;
            mintBtn.innerHTML = 'Mint SYPH Tokens';
        }
        
        // Update token balances
        updateTokenBalances();
    }
    
    // Show wallet info
    function showWalletInfo(account, networkName) {
        // Get the container or create it
        let walletInfo = document.querySelector('.wallet-info');
        
        if (!walletInfo) {
            walletInfo = document.createElement('div');
            walletInfo.className = 'wallet-info';
            
            // Get the wallet button's parent
            const walletBtn = document.getElementById('wallet');
            walletBtn.parentNode.appendChild(walletInfo);
        }
        
        // Update the content
        walletInfo.innerHTML = `
            <div class="wallet-address">${formatAddress(account)}</div>
            <div class="wallet-network">${networkName}</div>
            <div class="wallet-tokens">
                <div class="wallet-token-balance">
                    <span class="wallet-token-name">USDC</span>
                    <span class="wallet-token-amount" id="usdc-balance">Loading...</span>
                </div>
                <div class="wallet-token-balance">
                    <span class="wallet-token-name">SYPH</span>
                    <span class="wallet-token-amount" id="syph-balance">Loading...</span>
                </div>
            </div>
            <button class="wallet-disconnect" id="disconnect-btn">Disconnect</button>
        `;
        
        walletInfo.style.display = 'block';
        
        // Add disconnect event
        document.getElementById('disconnect-btn').addEventListener('click', disconnectWallet);
    }
    
    // Update token balances
    async function updateTokenBalances() {
        if (!currentAccount || !provider) return;
        
        try {
            // Get USDC balance
            const usdcBalance = await usdcContract.balanceOf(currentAccount);
            const usdcDecimals = await usdcContract.decimals();
            const formattedUsdcBalance = ethers.utils.formatUnits(usdcBalance, usdcDecimals);
            
            // Get SYPH balance
            const syphBalance = await syphContract.balanceOf(currentAccount);
            const formattedSyphBalance = ethers.utils.formatUnits(syphBalance, 18);
            
            // Update UI
            const usdcBalanceEl = document.getElementById('usdc-balance');
            const syphBalanceEl = document.getElementById('syph-balance');
            
            if (usdcBalanceEl) usdcBalanceEl.textContent = parseFloat(formattedUsdcBalance).toFixed(2);
            if (syphBalanceEl) syphBalanceEl.textContent = parseFloat(formattedSyphBalance).toFixed(2);
            
            // Store balance for max button
            window.usdcBalance = formattedUsdcBalance;
        } catch (error) {
            console.error('Error updating token balances:', error);
        }
    }
    
    // Disconnect wallet
    function disconnectWallet() {
        // Reset state
        currentAccount = null;
        provider = null;
        signer = null;
        syphContract = null;
        usdcContract = null;
        
        // Update UI
        const walletBtn = document.getElementById('wallet');
        if (walletBtn) {
            walletBtn.innerHTML = 'Connect Wallet';
            walletBtn.classList.remove('connected');
        }
        
        // Hide wallet info
        const walletInfo = document.querySelector('.wallet-info');
        if (walletInfo) {
            walletInfo.style.display = 'none';
        }
        
        // Disable mint button
        const mintBtn = document.getElementById('mint-btn');
        if (mintBtn) {
            mintBtn.disabled = true;
            mintBtn.innerHTML = 'Connect Wallet First';
        }
        
        console.log('Wallet disconnected');
    }
    
    // Handle accounts changed
    function handleAccountsChanged(accounts) {
        if (accounts.length === 0) {
            // User disconnected
            disconnectWallet();
        } else if (accounts[0] !== currentAccount) {
            // Account changed
            currentAccount = accounts[0];
            updateWalletUI();
        }
    }
    
    // Handle chain changed
    function handleChainChanged(chainId) {
        // Recommended by MetaMask to reload the page on chain change
        window.location.reload();
    }
    
    // Get network name from chain ID
    function getNetworkName(chainId) {
        const networks = {
            1: 'Ethereum Mainnet',
            5: 'Goerli Testnet',
            11155111: 'Sepolia Testnet',
            137: 'Polygon Mainnet',
            80001: 'Mumbai Testnet',
            56: 'BSC Mainnet',
            97: 'BSC Testnet',
            42161: 'Arbitrum One',
            421613: 'Arbitrum Goerli',
            10: 'Optimism',
            420: 'Optimism Goerli',
            43114: 'Avalanche C-Chain',
            43113: 'Avalanche Fuji',
        };
        
        return networks[chainId] || `Chain ${chainId}`;
    }
    
    // Format address for display
    function formatAddress(address) {
        return `${address.substring(0, 6)}...${address.substring(address.length - 4)}`;
    }
    
    // Update conversion amount based on input
    async function updateConversionAmount() {
        const amountInput = document.getElementById('mint-amount');
        const usdcAmountEl = document.getElementById('usdc-amount');
        const syphAmountEl = document.getElementById('syph-amount');
        
        if (!amountInput || !usdcAmountEl || !syphAmountEl) return;
        
        const amount = amountInput.value.trim();
        
        if (!amount || isNaN(parseFloat(amount)) || parseFloat(amount) <= 0) {
            usdcAmountEl.textContent = '0 USDC';
            syphAmountEl.textContent = '0 SYPH';
            return;
        }
        
        // Convert amount
        const usdcAmount = amount;
        const syphAmount = amount; // 1:1 exchange rate
        
        usdcAmountEl.textContent = `${parseFloat(usdcAmount).toFixed(2)} USDC`;
        syphAmountEl.textContent = `${parseFloat(syphAmount).toFixed(2)} SYPH`;
    }
    
    // Set max amount based on USDC balance
    function setMaxAmount() {
        if (!window.usdcBalance) return;
        
        const amountInput = document.getElementById('mint-amount');
        if (amountInput) {
            // Use slightly less than max to account for gas
            const maxAmount = Math.max(0, parseFloat(window.usdcBalance) - 0.01).toFixed(6);
            amountInput.value = maxAmount;
            updateConversionAmount();
        }
    }
    
    // Mint SYPH tokens
    async function mintTokens() {
        if (!currentAccount || !signer) {
            showNotification('Please connect your wallet first', 'error');
            return;
        }
        
        const amountInput = document.getElementById('mint-amount');
        if (!amountInput) return;
        
        const amount = amountInput.value.trim();
        
        if (!amount || isNaN(parseFloat(amount)) || parseFloat(amount) <= 0) {
            showNotification('Please enter a valid amount', 'error');
            return;
        }
        
        try {
            // Show loading notification
            showNotification('Processing transaction...', 'loading');
            
            // Get the amount with proper decimals
            const usdcDecimals = await usdcContract.decimals();
            const usdcAmount = ethers.utils.parseUnits(amount, usdcDecimals);
            
            // First approve USDC spending
            const approveTx = await usdcContract.approve(SYPH_CONTRACT_ADDRESS, usdcAmount);
            
            // Show approval notification
            showNotification('Approving USDC transfer...', 'loading');
            
            // Wait for approval confirmation
            await approveTx.wait();
            
            // Now mint tokens
            showNotification('Minting SYPH tokens...', 'loading');
            
            const mintTx = await syphContract.mintWithUSDC(usdcAmount);
            
            // Wait for mint confirmation
            await mintTx.wait();
            
            // Success!
            showNotification(`Successfully minted ${parseFloat(amount).toFixed(2)} SYPH tokens!`, 'success');
            
            // Update balances
            updateTokenBalances();
            
            // Clear input
            amountInput.value = '';
            updateConversionAmount();
            
        } catch (error) {
            console.error('Minting error:', error);
            showNotification(`Transaction failed: ${error.message}`, 'error');
        }
    }
    
    // Show notification
    function showNotification(message, type) {
        // Find or create notification element
        let notification = document.querySelector('.notification');
        if (!notification) {
            notification = document.createElement('div');
            notification.className = 'notification';
            
            // Add to mint form
            const mintForm = document.querySelector('.mint-form');
            if (mintForm) {
                mintForm.appendChild(notification);
            }
        }
        
        // Update notification content
        notification.className = `notification ${type}`;
        
        if (type === 'loading') {
            notification.innerHTML = `<span class="notification-spinner"></span> ${message}`;
        } else {
            notification.textContent = message;
        }
        
        notification.style.display = 'block';
        
        // Auto-hide for success and error
        if (type !== 'loading') {
            setTimeout(() => {
                notification.style.opacity = '0';
                setTimeout(() => {
                    notification.style.display = 'none';
                    notification.style.opacity = '1';
                }, 300);
            }, 5000);
        }
    }
    
    // Digital rain effect
    function createDigitalRain() {
        const container = document.getElementById('digitalRain');
        if (!container) return;
        
        const containerWidth = window.innerWidth;
        
        // Clear existing rain
        container.innerHTML = '';
        
        const columns = Math.floor(containerWidth / 20);
        
        for (let i = 0; i < columns; i++) {
            const column = document.createElement('div');
            column.classList.add('rain-column');
            column.style.left = `${i * 20 + Math.random() * 10}px`;
            
            const characters = generateRandomCharacters(20);
            column.textContent = characters;
            
            const duration = 10 + Math.random() * 20;
            column.style.animationDuration = `${duration}s`;
            
            const delay = Math.random() * 20;
            column.style.animationDelay = `${delay}s`;
            
            container.appendChild(column);
        }
    }
    
    function generateRandomCharacters(length) {
        const charset = "01„Ç¢„Ç§„Ç¶„Ç®„Ç™„Ç´„Ç≠„ÇØ„Ç±„Ç≥„Çµ„Ç∑„Çπ„Çª„ÇΩ„Çø„ÉÅ„ÉÑ„ÉÜ„Éà„Éä„Éã„Éå„Éç„Éé„Éè„Éí„Éï„Éò„Éõ„Éû„Éü„É†„É°„É¢„É§„É¶„É®„É©„É™„É´„É¨„É≠„ÉØ„É≥";
        let result = "";
        for (let i = 0; i < length; i++) {
            result += charset.charAt(Math.floor(Math.random() * charset.length));
        }
        return result;
    }
    
    // Handle window resizing
    window.addEventListener('resize', createDigitalRain);
    </script>
</body>
</html>WalletInfo = document.getElementById('walletInfo');
        if (existingWalletInfo) existingWalletInfo.remove();
        
        // Create wallet info element
        const walletInfo = document.createElement('div');
        walletInfo.id = 'walletInfo';
        walletInfo.className = 'wallet-info';
        walletInfo.innerHTML = `
            <div class="wallet-address">${account.substring(0, 6)}...${account.substring(account.length - 4)}</div>
            <div class="wallet-network">${networkName}</div>
            <button id="disconnectBtn" class="wallet-disconnect">Disconnect</button>
        `;
        
        // Add wallet info after connect button
        const walletBtn = document.getElementById('wallet');
        walletBtn.parentNode.appendChild(walletInfo);
        
        // Add style if not already added
        if (!document.getElementById('wallet-style')) {
            const style = document.createElement('style');
            style.id = 'wallet-style';
            style.textContent = `
                .wallet-info {
                    margin-top: 10px;
                    padding: 10px;
                    background-color: rgba(2, 48, 32, 0.7);
                    border: 1px solid var(--neon-green);
                    border-radius: 5px;
                }
                
                .wallet-address {
                    color: var(--neon-yellow);
                    font-family: monospace;
                    letter-spacing: 1px;
                }
                
                .wallet-network {
                    font-size: 0.8rem;
                    margin-top: 5px;
                }
                
                .wallet-disconnect {
                    background: none;
                    border: none;
                    color: var(--neon-green);
                    padding: 0;
                    margin-top: 8px;
                    cursor: pointer;
                    text-decoration: underline;
                    font-size: 0.9rem;
                }
                
                .wallet-disconnect:hover {
                    color: var(--neon-yellow);
                }
                
                .wallet-balance {
                    margin-top: 5px;
                    font-size: 0.9rem;
                    text-align: right;
                }
                
                .max-button {
                    position: absolute;
                    right: 10px;
                    top: 50%;
                    transform: translateY(-50%);
                    background: none;
                    border: none;
                    color: var(--neon-yellow);
                    cursor: pointer;
                    font-size: 0.8rem;
                    z-index: 2;
                }
                
                .max-button:hover {
                    text-decoration: underline;
                }
                
                .deposit-notification {
                    margin-top: 15px;
                    padding: 12px;
                    border-radius: 5px;
                    text-align: center;
                }
                
                .deposit-success {
                    background-color: rgba(0, 255, 128, 0.2);
                    border: 1px solid var(--neon-green);
                }
                
                .deposit-error {
                    background-color: rgba(255, 51, 102, 0.2);
                    border: 1px solid #ff3366;
                    color: #ff6688;
                }
                
                .deposit-loading {
                    background-color: rgba(212, 255, 0, 0.2);
                    border: 1px solid var(--neon-yellow);
                }
                
                .btn.connected {
                    background: var(--neon-green);
                    color: var(--darker-green);
                }
            `;
            document.head.appendChild(style);
        }
        
        // Add disconnect event
        document.getElementById('disconnectBtn').addEventListener('click', () => {
            // Remove wallet info
            walletInfo.remove();
            
            // Update button
            const walletBtn = document.getElementById('wallet');
            walletBtn.innerHTML = 'Connect Wallet';
            walletBtn.classList.remove('connected');
            
            // Disable deposit button
            const depositButton = document.querySelector('.deposit-form .btn:last-child');
            if (depositButton) {
                depositButton.disabled = true;
                depositButton.innerHTML = 'Connect Wallet First';
            }
            
            console.log('Wallet disconnected from UI');
        });
    }
    
    // Add balance display to amount input
    async function addBalanceDisplay(account) {
        const amountInput = document.getElementById('amount');
        const assetSelect = document.getElementById('asset');
        
        if (!amountInput || !account) return;
        
        try {
            // Get ETH balance
            const balanceWei = await ethereum.request({
                method: 'eth_getBalance',
                params: [account, 'latest']
            });
            
            // Convert to ETH
            const balanceETH = parseInt(balanceWei, 16) / 1e18;
            
            // Create balance display
            let balanceDisplay = document.querySelector('.wallet-balance');
            if (!balanceDisplay) {
                balanceDisplay = document.createElement('div');
                balanceDisplay.className = 'wallet-balance';
                amountInput.parentNode.appendChild(balanceDisplay);
            }
            
            // Update display
            balanceDisplay.textContent = `Balance: ${balanceETH.toFixed(4)} ETH`;
            
            // Position the input container for the max button
            amountInput.parentElement.style.position = 'relative';
            
            // Add MAX button for ETH
            let maxButton = document.querySelector('.max-button');
            if (!maxButton) {
                maxButton = document.createElement('button');
                maxButton.type = 'button';
                maxButton.className = 'max-button';
                maxButton.innerHTML = 'MAX';
                
                maxButton.addEventListener('click', () => {
                    // Leave some ETH for gas
                    const maxAmount = Math.max(0, balanceETH - 0.01).toFixed(4);
                    amountInput.value = maxAmount;
                });
                
                amountInput.parentElement.appendChild(maxButton);
            }
            
        } catch (error) {
            console.error('Error getting balance:', error);
        }
    }
    
    // Convert text inputs to selects
    document.addEventListener('DOMContentLoaded', function() {
        // Asset select
        const assetInput = document.getElementById('asset');
        if (assetInput && assetInput.tagName.toLowerCase() === 'input') {
            const assetSelect = document.createElement('select');
            assetSelect.id = 'asset';
            assetSelect.innerHTML = `
                <option value="">Select Asset</option>
                <option value="ETH" selected>ETH</option>
                <option value="USDC">USDC</option>
                <option value="USDT">USDT</option>
                <option value="DAI">DAI</option>
                <option value="WBTC">WBTC</option>
            `;
            assetInput.parentNode.replaceChild(assetSelect, assetInput);
        }
        
        // Strategy select
        const strategyInput = document.getElementById('strategy');
        if (strategyInput && strategyInput.tagName.toLowerCase() === 'input') {
            const strategySelect = document.createElement('select');
            strategySelect.id = 'strategy';
            strategySelect.innerHTML = `
                <option value="">Select Strategy</option>
                <option value="Balanced" selected>Balanced</option>
                <option value="Conservative">Conservative</option>
                <option value="Aggressive">Aggressive</option>
                <option value="YieldFarming">Yield Farming</option>
                <option value="LiquidityProvision">Liquidity Provision</option>
            `;
            strategyInput.parentNode.replaceChild(strategySelect, strategyInput);
        }
        
        // Style selects
        const style = document.createElement('style');
        style.textContent = `
            .form-group select {
                width: 100%;
                padding: 12px;
                background-color: rgba(1, 26, 18, 0.8);
                border: 1px solid var(--neon-green);
                border-radius: 5px;
                color: var(--text-color);
                font-size: 1rem;
                transition: all 0.3s ease;
                appearance: none;
                background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%2300ff80' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
                background-repeat: no-repeat;
                background-position: right 10px center;
            }
            
            .form-group select:focus {
                outline: none;
                border-color: var(--neon-yellow);
                box-shadow: 0 0 10px var(--neon-yellow);
            }
        `;
        document.head.appendChild(style);
    });
    
    // Handle deposit
    async function handleDeposit(e) {
        e.preventDefault();
        
        // Check if wallet is connected
        if (typeof window.ethereum === 'undefined' || !(await ethereum.request({ method: 'eth_accounts' })).length) {
            alert('Please connect your wallet first');
            return;
        }
        
        // Get values
        const amount = document.getElementById('amount').value.trim();
        const asset = document.getElementById('asset').value;
        const strategy = document.getElementById('strategy').value;
        
        // Validate
        if (!amount || isNaN(parseFloat(amount)) || parseFloat(amount) <= 0) {
            showNotification('Please enter a valid amount', 'error');
            return;
        }
        
        if (!asset) {
            showNotification('Please select an asset', 'error');
            return;
        }
        
        if (!strategy) {
            showNotification('Please select a strategy', 'error');
            return;
        }
        
        try {
            // Show loading
            showNotification('Processing transaction...', 'loading');
            
            // Get account
            const accounts = await ethereum.request({ method: 'eth_accounts' });
            if (!accounts.length) {
                showNotification('Wallet disconnected', 'error');
                return;
            }
            
            // For demonstration: mock contract address
            const contractAddress = '0x71C7656EC7ab88b098defB751B7401B5f6d8976F';
            
            // If ETH, send transaction
            if (asset === 'ETH') {
                // Convert amount to wei
                const amountWei = `0x${(parseFloat(amount) * 1e18).toString(16)}`;
                
                // Create transaction
                const txHash = await ethereum.request({
                    method: 'eth_sendTransaction',
                    params: [{
                        from: accounts[0],
                        to: contractAddress,
                        value: amountWei,
                        // For real contract, add function call data here
                    }]
                });
                
                // Show success
                showNotification(
                    `Successfully deposited ${amount} ETH with ${strategy} strategy!<br>
                    <a href="https://etherscan.io/tx/${txHash}" target="_blank" style="color:inherit;">
                        View transaction
                    </a>`,
                    'success'
                );
                
                // Reset form
                document.getElementById('amount').value = '';
            } else {
                // For tokens, normally we'd need to approve and call contract
                // For demo, simulate success after delay
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // Show success
                const mockTxHash = '0x' + Array.from({length: 64}, () => 
                    Math.floor(Math.random() * 16).toString(16)).join('');
                
                showNotification(
                    `Successfully deposited ${amount} ${asset} with ${strategy} strategy!<br>
                    <a href="#" style="color:inherit;">
                        View transaction
                    </a>`,
                    'success'
                );
                
                // Reset form
                document.getElementById('amount').value = '';
            }
            
        } catch (error) {
            console.error('Deposit error:', error);
            showNotification(`Transaction failed: ${error.message}`, 'error');
        }
    }
    
    // Show notification
    function showNotification(message, type) {
        // Get deposit form
        const depositForm = document.querySelector('.deposit-form');
        
        // Remove existing notification
        const existingNotification = document.querySelector('.deposit-notification');
        if (existingNotification) existingNotification.remove();
        
        // Create notification
        const notification = document.createElement('div');
        notification.className = `deposit-notification deposit-${type}`;
        notification.innerHTML = message;
        
        // Add to form
        depositForm.appendChild(notification);
        
        // Auto hide after delay (except loading)
        if (type !== 'loading') {
            setTimeout(() => {
                notification.style.opacity = '0';
                setTimeout(() => notification.remove(), 300);
            }, 10000);
        }
    }
    </script>
</body>
</html>
</html>
